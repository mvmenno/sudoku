(()=>{"use strict";var t,e,o={912:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var o=function(){function t(){}return t.prototype.createCookie=function(t,e,o){var r;if(o){var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3),r="; expires="+s.toUTCString()}else r="";document.cookie=t+"="+e+r+"; path=/"},t.prototype.getCookie=function(t){for(var e=t+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var s=o[r];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return s.substring(e.length,s.length)}return null},t.prototype.save=function(t){return this.createCookie("sudoku",t,30),!0},t.prototype.load=function(){return this.getCookie("sudoku")},t}();e.Storage=o}},r={};t=function t(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}};return o[e](a,a.exports,t),a.exports}(912),e=function(){function e(){this.used=[],this.shiftRows=[],this.validBoard=!1,this.ts=0,this.storage=new t.Storage,this.reset()}return e.prototype.reset=function(){this.ts=Date.now(),this.board=[],this.solvedBoard=[],this.used=[],this.shiftRows=[],this.validBoard=!1,this.boardEl=document.getElementsByClassName("sudoku")[0],this.generateBoard();var t=this;setInterval((function(){t.update()}),1e3)},e.prototype.generateBoard=function(){for(var t="",e=0;e<9;e++){t+='<tr class="'+e+'">',this.board[e]=[];for(var o=0;o<9;o++)t+='<td class="'+o+'"><input type="text" class="'+e+"-"+o+'"/></td>',this.board[e][o]=0;t+="</tr>"}this.boardEl.innerHTML=t;var r=this.storage.load(),s=!1;if(r){var a=JSON.parse(r);console.log(a),a.board&&a.solvedBoard&&(s=!0,this.board=a.board.map((function(t){return t})),this.solvedBoard=a.solvedBoard.map((function(t){return t})))}s||this.generatePresetValues(),this.updateBoard()},e.prototype.generatePresetValues=function(){for(var t=1,e=0;e<9;e++){1==e||2==e||4==e||5==e||7==e||8==e?this.shiftRows[e]=3:e>0&&(this.shiftRows[e]=t);for(var o=0;o<9;o++)this.solverCheck(e,o)}for(this.solvedBoard=JSON.parse(JSON.stringify(this.board)),e=0;e<9;e++)for(o=0;o<9;o++)Math.random()<.1&&(this.board[e][o]=0);for(var r=0;r<3;r++){var s=Math.floor(9*Math.random())+1+(t=Math.floor(5*Math.random()+4));s>=9&&(s-=8)}this.validBoard=!0},e.prototype.insertAndShift=function(t,e,o){var r=t.map((function(t){return t})),s=r.splice(e,1)[0];return r.splice(o,0,s),r},e.prototype.solverCheck=function(t,e){var o=!0,r=!1,s=0,a=0,i=0;if(0!=t&&(i=this.shiftRows[t]),0==t)for(;!r&&s<1e3;)a=Math.floor(9*Math.random())+1,-1===this.used.indexOf(a)?(this.used.push(a),o=!0):o=!1,o&&(this.board[t][e]=a,r=!0),s++;else if(t>0){var n=e+i;n>=9&&(n-=9),this.board[t][e]=this.board[t-1][n]}},e.prototype.update=function(){var t=Math.floor((Date.now()-this.ts)/1e3);document.getElementsByClassName("time")[0].innerHTML=t.toString()+"sec"},e.prototype.updateBoard=function(){this.boardEl=document.getElementsByClassName("sudoku")[0],console.log(this.board);for(var t=[],e=0;e<9;e++)for(var o=0;o<9;o++){var r=this.boardEl.querySelector("tr[class='"+e+"'] > td[class='"+o+"'] > input"),s=parseInt(r.value[r.value.length-1]);isNaN(s)?r.value="":this.board[e][o]=s,0!==this.board[e][o]&&(r.value=this.board[e][o].toString()),console.log(this.board[e][o]),t[this.board[e][o]]||(t[this.board[e][o]]=0),t[this.board[e][o]]++}console.log(t);for(var a=1;a<=9;a++)t[a]>=9?(console.log("MAKE HIDEN!"),document.getElementsByClassName("remaining")[0].querySelector('span[class="rm-'+a+'"]').style.visibility="hidden"):document.getElementsByClassName("remaining")[0].querySelector('span[class="rm-'+a+'"]').style.visibility="visible";JSON.stringify(this.board)==JSON.stringify(this.solvedBoard)&&(alert("Completed sudoku!"),this.storage.save(""),this.reset());var i={board:this.board,solvedBoard:this.solvedBoard};this.storage.save(JSON.stringify(i))},e.prototype.updateValue=function(t,e){var o=!0,r=this.boardEl.querySelector('input[class="'+t+"-"+e+'"');if(""==r.value)return this.board[t][e]=0,void(r.value="");if(parseInt(r.value)<=0)return this.board[t][e]=0,void(r.value="");if(parseInt(r.value)>9){var s=parseInt(r.value[r.value.length-1]);this.board[t][e]=s,r.value=s.toString()}var a=parseInt(r.value);this.solvedBoard[t][e]>0&&(a!=this.solvedBoard[t][e]&&(o=!1),o?(this.validBoard=!0,r.style.color="#008259"):(this.validBoard=!1,r.style.color="#ff0000"))},e}(),window.onload=function(){for(var t=new e,o=document.querySelectorAll("tr > td > input"),r=0;r<o.length;r++)o[r].addEventListener("keyup",(function(e){var o=e.target.getAttribute("class").split("-");t.updateValue(parseInt(o[0]),parseInt(o[1])),t.updateBoard()}));document.getElementsByClassName("btn-new")[0].addEventListener("click",(function(e){console.log("click!"),this.storage.save(""),t.reset()}))}})();